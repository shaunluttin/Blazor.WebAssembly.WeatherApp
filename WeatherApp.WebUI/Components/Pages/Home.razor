@page "/"
@rendermode InteractiveServer
@using WeatherApp.WebUI.Services
@using WeatherApp.WebUI.Models
@using WeatherApp.WebUI.Components.Lists
@inject IWeatherService WeatherService

<PageTitle>Home</PageTitle>

<h1>City Search</h1>

<form @onsubmit="SearchWeatherForCityAsync">
    <input type="text" @bind="searchTerm" />
    <button class="btn btn-primary">Search</button>
</form>

<CityList Cities="@cities"/>


@code {
    private City[]? cities;

    private string searchTerm = "";
    
    private async Task SearchWeatherForCityAsync()
    {
        // https://learn.microsoft.com/en-us/aspnet/core/blazor/components/event-handling
        cities = await WeatherService.SearchCities(@searchTerm);
    }
}